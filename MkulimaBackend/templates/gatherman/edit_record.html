
{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>KiliPesa</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">

    <!-- jquery should be top -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>

     <!-- semantic ui css -->
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.5.0/semantic.min.css"
        integrity="sha512-KXol4x3sVoO+8ZsWPFI/r5KBVB/ssCGB5tsv2nVOKwLg33wTFP3fmnXa47FdSVIshVTgsYk/1734xSk9aFIa4A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
      <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.5.0/semantic.min.js"
        integrity="sha512-Xo0Jh8MsOn72LGV8kU5LsclG7SUzJsWGhXbWcYs2MAmChkQzwiW/yTQwdJ8w6UA9C6EVG18GHb/TrYpYCjyAQw=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    

    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&family=Roboto:wght@500;700&display=swap" rel="stylesheet"> 
    
    <!-- Icon Font Stylesheet -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->

    <link href={% static "mkulima/js/darkpan/lib/owlcarousel/assets/owl.carousel.min.css" %} rel="stylesheet" />
    <link
      href={% static "mkulima/js/darkpan/lib/tempusdominus/css/tempusdominus-bootstrap-4.min.css" %}
      rel="stylesheet"
    />

    <!-- Customized Bootstrap Stylesheet -->
    <link href={% static "mkulima/css/darkpan/bootstrap.min.css" %}
    rel="stylesheet" />

    <!-- Template Stylesheet -->
    <link href={% static "mkulima/css/darkpan/style.css" %} rel="stylesheet" />
</head>

<body>
    <div class="container-fluid position-relative d-flex p-0">
        <!-- Spinner Start -->
        <div id="spinner" class="show bg-dark position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
            <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
                <span class="sr-only">Loading...</span>
            </div>
        </div>
        <!-- Spinner End -->
        <!-- Sidebar Start -->
        <div class="sidebar pe-4 pb-3">
            <nav style="background: #fff" class="navbar">
                <a href="/" class="navbar-brand mx-4 mb-3" ><img src={% static 'mkulima/images/logo.jpeg' %} width="100" /></a>
                <div class="d-flex align-items-center ms-4 mb-4">
                    <div class="position-relative">
                        <img class="rounded-circle" src={{photo}} alt="" style="width: 40px; height: 40px;">
                        <div class="bg-success rounded-circle border border-2 border-white position-absolute end-0 bottom-0 p-1"></div>
                    </div>
                    <div class="ms-3">
                        <h6 style="color: #6c7293" class="mb-0 text-capitalize">{{fname}} {{lname}}</h6>
                        <span>{{usergroup}}</span>
                    </div>
                </div>

                <div class="navbar-nav w-100">
                    {% if usergroup == "admin" %}
                        <a href={% url 'administrator' %} class="nav-item nav-link"><i class="fa fa-tachometer-alt me-2"></i>Dashboard</a>
            
                        <div class="nav-item dropdown">
                            <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown"><i class="fa fa-users me-2"></i>Users</a>
                            <div class="dropdown-menu bg-transparent border-0">
                                <a href={% url 'userargonomist' %} class="dropdown-item">Argonomist</a>
                                <a href={% url 'usergatherman' %} class="dropdown-item">Gatherman</a>
                            </div>
                        </div>
                        <a href="" class="nav-item nav-link text-nowrap"><i class="fa fa-vial me-2"></i>Test and Recom..</a>
                        {% comment %} <a href={% url 'farms' %} class="dropdown-item active">Farms</a> {% endcomment %}
                        <a href={% url 'farms' %} class="nav-item nav-link text-nowrap active"><i class="fa fa-tree me-2"></i>Farms</a>

                        <a href={% url 'farmersreport' %} class="nav-item nav-link text-nowrap"><i class="fa fa-id-card me-2"></i>Farmers</a>

                        {% comment %} <div class="nav-item dropdown">
                            <a href="#" class="nav-link dropdown-toggle active" data-bs-toggle="dropdown"><i class="fa fa-book me-2"></i>Informations</a>
                            <div class="dropdown-menu bg-transparent border-0">
                                <a href={% url 'farms' %} class="dropdown-item active">Farms</a>
                            </div>
                        </div> {% endcomment %}
                    
                        {% comment %} <div class="nav-item dropdown">
                            <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown"><i class="fa fa-bookmark me-2"></i>Reports</a>
                            <div class="dropdown-menu bg-transparent border-0">
                                <a href={% url 'cropsreport' %} class="dropdown-item">Crops & Production</a>
                            </div>
                        </div> {% endcomment %}

                        <div class="nav-item dropdown">
                            <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown"><i class="fa fa-bookmark me-2"></i>Reports</a>
                            <div class="dropdown-menu bg-transparent border-0">
                                <a href={% url 'cropsreport' %} class="dropdown-item">General</a>
                                <a href={% url 'farmsreport' %} class="dropdown-item">Farms</a>
                                {% comment %} <a href={% url 'farmersreport' %} class="dropdown-item">Farmers</a> {% endcomment %}
                                <a href={% url 'recommendedcrops' %} class="dropdown-item">Crops</a>
                                <a href={% url 'fertlizerreport' %} class="dropdown-item">Fertilizers</a>
                                <a href={% url 'yieldreport' %} class="dropdown-item">Yield and Productions</a>
                                <a href={% url 'seedamount' %} class="dropdown-item">Seeds</a>
                                <a href={% url 'cultivation' %} class="dropdown-item">Cultivation</a>
                                <a href={% url 'soilreport' %} class="dropdown-item">Soil</a>
                            </div>
                        </div>
                    
                        {% comment %} <div class="nav-item dropdown">
                            <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown"><i class="fa fa-th me-2"></i>Other</a>
                            <div class="dropdown-menu bg-transparent border-0">
                                <a href="" class="dropdown-item">Edit Profile</a>
                                <a href="" class="dropdown-item">Change Password</a>
                                <a href="" class="dropdown-item">Logs & Actions</a>
                            </div>
                        </div> {% endcomment %}
                    {% else %}
                    <a href={% url 'gather_full_profile' %} class="nav-item nav-link"><i class="fa fa-tachometer-alt me-2"></i>Dashboard</a>
                    <a href="" class="text-nowrap nav-item active nav-link"><i class="fa fa-book me-2"></i>Records</a>
                    <a href={% url 'viewgatherprofile' gid=gatherman %} class="nav-item nav-link"><i class="fa fa-edit me-2"></i>Edit Profile</a>
                    <a href={% url 'gatherman_changepassword' %} class="nav-item nav-link text-nowrap"><i class="fa fa-lock me-2"></i>Change Password</a>
                    {% endif %}
                </div>  
            </nav>
        </div>
        <!-- Sidebar End -->


        <!-- Content Start -->
        <div class="content">
            <!-- Navbar Start -->
            <nav style="background: #fff" class="navbar navbar-expand sticky-top px-4 py-0">
                <a href="index.html" class="navbar-brand d-flex d-lg-none me-4">
                    <h2 class="text-primary mb-0"><i class="fa fa-user-edit"></i></h2>
                </a>
                <a href="#" class="sidebar-toggler flex-shrink-0">
                    <i class="fa fa-bars text-success"></i>
                </a>
              
                
                <div class="navbar-nav align-items-center ms-auto">
                    <div class="nav-item dropdown">
                        <div class="dropdown-menu dropdown-menu-end bg-secondary border-0 rounded-0 rounded-bottom m-0">
                            <a href="#" class="dropdown-item">
                                <div class="d-flex align-items-center">
                                    <img class="rounded-circle" src="img/user.jpg" alt="" style="width: 40px; height: 40px;">
                                    <div class="ms-2">
                                        <h6 class="fw-normal mb-0">Jhon send you a message</h6>
                                        <small>15 minutes ago</small>
                                    </div>
                                </div>
                            </a>
                            <hr class="dropdown-divider">
                            <a href="#" class="dropdown-item">
                                <div class="d-flex align-items-center">
                                    <img class="rounded-circle" src="img/user.jpg" alt="" style="width: 40px; height: 40px;">
                                    <div class="ms-2">
                                        <h6 class="fw-normal mb-0">Jhon send you a message</h6>
                                        <small>15 minutes ago</small>
                                    </div>
                                </div>
                            </a>
                            <hr class="dropdown-divider">
                            <a href="#" class="dropdown-item">
                                <div class="d-flex align-items-center">
                                    <img class="rounded-circle" src="img/user.jpg" alt="" style="width: 40px; height: 40px;">
                                    <div class="ms-2">
                                        <h6 class="fw-normal mb-0">Jhon send you a message</h6>
                                        <small>15 minutes ago</small>
                                    </div>
                                </div>
                            </a>
                            <hr class="dropdown-divider">
                            <a href="#" class="dropdown-item text-center">See all message</a>
                        </div>
                    </div>
                    <button type="submit" id="submitbtn" form="metadataForm" class="btn btn-success">Update Record</button>
                    {% if usergroup == "admin" %}
                        <a href={% url 'deleteinfo' rid=gatheredInfos.id %} class="mx-3"><button class="btn btn-danger">Delete Record</button></a>
                    {% endif %}
                    <div class="nav-item dropdown">
                        <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">
                            <img class="rounded-circle me-lg-2" src={{photo}} alt="" style="width: 40px; height: 40px;">
                            <span style="color: #6c7293; font-weight: bold" class="d-none d-lg-inline-flex text-capitalize" onmouseover="this.style.color='#49A078'" onmouseout="this.style.color='#6c7293'">{{fname}} {{lname}}</span>
                        </a>
                        <div style="background: #fff" class="dropdown-menu dropdown-menu-end border-0 rounded-0 rounded-bottom m-0">
                            
                            <a href={% url 'logout' %}  class="dropdown-item">Log Out</a>
                        </div>
                    </div>
                </div>
            </nav>

            <!-- Navbar End -->
            


            <!-- Recent Sales Start -->
            <div class="container-fluid pt-4 px-4">
                <div style="background: #fff" class="text-center rounded p-2">
                    <div class="d-flex align-items-center justify-content-between my-2">
                        <h5 style="color: #6c7293" class="mb-0">Update Record</h5>
                    </div>
                    <div id="message" style="font-weight: bold; color: red; margin-top: 10px;">
                        <p id='pMessage'>{{message}}</p>
                    </div>
                    <div id="frontEndMsg" style="font-weight: bold; color: red; margin-top: 10px; display: none;">
                        <p id='frontEndMessage'>Hello world</p>
                    </div>
                </div>
            </div>
            <!-- Recent Sales End -->
            <!-- Form Start -->
            <!-- this onkeydown="return event.key != 'Enter';" prevent the 'enter from submitting the form
                but make sure you don't have the textarea in your form.. this helpful and if you can Credit
                this guy article onkeydown="return event.key != 'Enter';"-->
            <form onkeydown="return event.key != 'Enter';" id="metadataForm", method="POST" enctype="multipart/form-data">
                {% csrf_token %}
            <div class="container-fluid pt-4 px-4">
                <div class="row g-4">
                    <div class="col-sm-12 col-xl-6">
                        <div style="background: #fff" class="rounded h-100 p-4">
                            <h6 class="mb-4 fst-italici">FARM OWNER</h6>
                                <div class="row">
                                    <div class="mb-3 col-12 col-md-6 col-sm-12 col-lg-6 col-xl-6">
                                        <label for="oname" class="form-label">Full name</label>
                                        <input style="background: #95D5B2; border: 1px solid #6c7293" type="text" value="{{owner.full_name}}" name="oname" class="form-control" id="oname"
                                            aria-describedby="emailHelp">
                                        
                                    </div>
                                    <div class="mb-3 col-12 col-md-6  col-sm-12 col-lg-6 col-xl-6">
                                        <label for="oage" class="form-label">Age</label>
                                        <input style="background: #95D5B2; border: 1px solid #6c7293" type="number" value="{{owner.age}}" name="oage" class="form-control" id="oage"
                                            aria-describedby="emailHelp">
                                        
                                    </div>
                                    <div class="mb-3 col-12 col-md-6  col-sm-12 col-lg-6 col-xl-6">
                                        <label for="ogender" class="form-label">Gender</label>

                                        <select style="background: #95D5B2; border: 1px solid #6c7293" id="ogender" name="ogender" class="form-select mb-3" aria-label="Default select example">
                                            <option {% if owner.gender == "Male" %}
                                                        selected
                                                    {% endif %} value="Male">Male</option>
                                            <option {% if owner.gender == "Female" %}
                                                        selected
                                                    {% endif %} value="Female">Female</option>
                                        </select>
                                    </div>
                                    <div class="mb-3 col-12 col-md-6  col-sm-12 col-lg-6 col-xl-6">
                                        <label for="ownernida" class="form-label">National ID</label>
                                        <input style="background: #95D5B2; border: 1px solid #6c7293" type="text" value="{{owner.nationalID}}" name="onida" class="form-control" id="ownernida"
                                            aria-describedby="emailHelp">
                                        
                                    </div>
                                    <div class="mb-3 col-12 col-md-6 col-sm-12 col-lg-6 col-xl-6">
                                        <label for="ownerphone" class="form-label">Phone number</label>
                                        <input style="background: #95D5B2; border: 1px solid #6c7293" maxlength="10" type="text" value="{{owner.phone}}" name="ophone" class="form-control" id="ownerphone"
                                            aria-describedby="emailHelp">
                                        
                                    </div>
                                    <div class="mb-3 col-12 col-md-6  col-sm-12 col-lg-6 col-xl-6">
                                        <div>
                                            <label class="form-label">Profile picture</label>

                                            <input accept="image/*" style="display: none" class="form-control bg-dark" name="ophoto" type="file" id="ownerphoto">
                                            <label title={{owner.photo.url}} id="ownerphotolabel" for="ownerphoto" style="width: 150px; height: 100px; border: 1px dotted rgb(179, 177, 177); background-color: rgb(231, 231,231); cursor: pointer;" class="d-flex justify-content-center align-items-center">
                                                <img id="loadedimg" src={{owner.photo.url}} style="width: 100%; height: 100%" />
                                            </label>
                                        </div>
                                    </div>
                            </div>
                                
                        </div>
                    </div>
                    <div class="col-sm-12 col-xl-6">
                        <div style="background: #fff" class="rounded h-100 p-4">
                            <h6 class="mb-4 fst-italici">FARM OWNER'S RESIDENCE</h6>
                            <div class="row">
                                <div class="mb-3 col-12 col-md-6  col-sm-12 col-lg-6 col-xl-6">
                                    <label for="ocountry" class="form-label">Country</label>

                                    <select style="background: #95D5B2; border: 1px solid #6c7293" id="ocountry" name="ocountry" class="form-select mb-3" aria-label="Default select example">
                                        <option {% if owner.country == "Tanzania" %}
                                                        selected
                                                {% endif %} value="Tanzania">TANZANIA</option>
                                    </select>
                                </div>
                                <div class="mb-3 col-12 col-md-6  col-sm-12 col-lg-6 col-xl-6">
                                    <label for="oregion" class="form-label">Region</label>
                                    <input type='hidden' id="hiddenOregion" value='{{owner.region}}' />
                                    <select style="background: #95D5B2; border: 1px solid #6c7293" id="oregion" name="oregion" class="form-select mb-3" aria-label="Default select example">
                                        {% comment %} <option {% if owner.region == "Dar es salaam" %}
                                        selected
                                {% endif %} value="Dar es salaam">Dar es salaam</option> {% endcomment %}
                                    </select>
                                </div>
                                <div class="mb-3 col-12 col-md-6  col-sm-12 col-lg-6 col-xl-6">
                                    <label for="odistrict" class="form-label">District</label>
                                    <input type="hidden" id="hiddenOdistrict" value="{{owner.district}}" />
                                    <select style="background: #95D5B2; border: 1px solid #6c7293" id="odistrict" name="odistrict" class="form-select mb-3" aria-label="Default select example">
                                        
                                    </select>
                                </div>
                                <div class="mb-3 col-12 col-md-6 col-sm-12 col-lg-6 col-xl-6">
                                    <label for="oward" class="form-label">Ward</label>
                                    <input style="background: #95D5B2; border: 1px solid #6c7293" value="{{owner.ward}}" type="text" name="oward" class="form-control" id="oward"
                                        aria-describedby="emailHelp">
                                </div>
                                {% comment %} <div class="mb-3 col-12 col-md-6  col-sm-12 col-lg-6 col-xl-6">
                                    <label for="oward" class="form-label">Ward</label>

                                    <select id="oward" name="oward" class="form-select mb-3" aria-label="Default select example">
                                        <option {% if owner.ward == "Buguruni" %}
                                        selected
                                {% endif %} value="Buguruni">Buguruni</option>
                                        <option {% if owner.ward == "Vingunguti" %}
                                        selected
                                {% endif %} value="Vingunguti">Vingunguti</option>
                                        <option {% if owner.ward == "Posta" %}
                                        selected
                                {% endif %} value="Posta">Posta</option>
                                        <option {% if owner.ward == "Tabata" %}
                                        selected
                                {% endif %} value="Tabata">Tabata</option>
                                        <option {% if owner.ward == "Amana" %}
                                        selected
                                {% endif %} value="Amana">Amana</option>
                                    </select>
                                </div> {% endcomment %}
                        </div>
                        </div>
                    </div>
                    <div class="col-sm-12 col-xl-6">
                        <div style="background: #fff" class="rounded h-100 p-4">
                            <h6 style="color: #6c7293" class="mb-4 fst-italici text-uppercase">Farm Owner's Family Details</h6>
                            <div class="row">
                                <div class="mb-3 col-12 col-md-6  col-sm-12 col-lg-6 col-xl-6">
                                    <label for="marital" class="form-label">Marital Status</label>
                                    
                                    <select style="background: #95D5B2; border: 1px solid #6c7293" id="marital" name="fdmarital" class="form-select mb-3" aria-label="Default select example">
                                        <option {% if family.marital_status == "Single" %} selected {% endif %} value="Single">Single</option>
                                        <option {% if family.marital_status == "Married" %} selected {% endif %} value="Married">Married</option>
                                        <option {% if family.marital_status == "Widowed" %} selected {% endif %} value="Widowed">Widowed</option>
                                        <option {% if family.marital_status == "Divorced" %} selected {% endif %} value="Divorced">Divorced</option>
                                    </select>
                                </div>
                                <div class="mb-3 col-12 col-md-6 col-sm-12 col-lg-6 col-xl-6">
                                    <label for="fdchildren" class="form-label">Number of Children</label>
                                    <input style="background: #95D5B2; border: 1px solid #6c7293" value="{{family.noChild}}" min="0" type="number" class="form-control" name="fdchild" id="fdchildren"
                                        aria-describedby="emailHelp">
                                    <div id="emailHelp" class="form-text">**optional.
                                    </div>
                                </div>
                                <div class="mb-3 col-12 col-md-6 col-sm-12 col-lg-6 col-xl-6">
                                    <label for="fdwives" class="form-label">Number of Wives</label>
                                    <input style="background: #95D5B2; border: 1px solid #6c7293" value="{{family.noWives}}" min="0" type="number" class="form-control" name="fdwives" id="fdwives"
                                        aria-describedby="emailHelp">
                                    <div id="emailHelp" class="form-text">**optional.
                                    </div>
                                </div><div class="mb-3 col-12 col-md-6 col-sm-12 col-lg-6 col-xl-6">
                                    <label for="fdlivestock" class="form-label">Number of Livestocks</label>
                                    <input style="background: #95D5B2; border: 1px solid #6c7293" type="number" value="{{family.nolivestock}}" min="0" class="form-control" name="fdlive" id="fdlivestock"
                                        aria-describedby="emailHelp">
                                    <div id="emailHelp" class="form-text">**optional.
                                    </div>
                                </div>
                                
                                <div class="mb-3 col-12 col-md-6  col-sm-12 col-lg-6 col-xl-6">
                                    <label for="fdhousetype" class="form-label">House Type</label>

                                    <select style="background: #95D5B2; border: 1px solid #6c7293" id="fdhousetype" class="form-select mb-3" name="fdhouse" aria-label="Default select example">
                                        <option {% if family.houseType == "Mud house"%} 
                                                    selected 
                                                {% endif %}value="Male">Mud house</option>
                                        <option {% if family.houseType == "Block house"%} 
                                        selected 
                                    {% endif %} value="Block house">Block house</option>
                                        <option {% if family.houseType == "Good Standard"%} 
                                        selected 
                                    {% endif %} value="Good Standard">Good Standard</option>
                                    </select>
                                </div>
                                
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-12 col-xl-6">
                        <div style="background: #fff" class="rounded h-100 p-4">
                            <h6 style="color: #6c7293" class="mb-4 fst-italici text-uppercase">Farm Owner's Next of Kin</h6>
                            <div class="row">
                                <div class="mb-3 col-12 col-md-6 col-sm-12 col-lg-6 col-xl-6">
                                    <label for="nkfullname" class="form-label">Full name</label>
                                    <input style="background: #95D5B2; border: 1px solid #6c7293" type="text" value="{{kin.full_name}}" class="form-control" name="nkname" id="nkfullname"
                                        aria-describedby="emailHelp">
                                    
                                </div>
                                <div class="mb-3 col-12 col-md-6  col-sm-12 col-lg-6 col-xl-6">
                                    <label for="nkage" class="form-label">Age</label>
                                    <input style="background: #95D5B2; border: 1px solid #6c7293" type="number" value="{{kin.age}}" name="nkage" class="form-control" id="nkage"
                                        aria-describedby="emailHelp">
                                    
                                </div>
                                <div class="mb-3 col-12 col-md-6  col-sm-12 col-lg-6 col-xl-6">
                                    <label for="nkgender" class="form-label">Gender</label>

                                    <select style="background: #95D5B2; border: 1px solid #6c7293" id="nkgender" name="nkgender" class="form-select mb-3" aria-label="Default select example">
                                        <option {% if kin.gender == "Male" %}
                                                        selected
                                                {% endif %} value="Male">Male</option>
                                        <option {% if kin.gender == "Female" %}
                                                        selected
                                                {% endif %} value="Female">Female</option>
                                    </select>
                                </div>
                                <div class="mb-3 col-12 col-md-6  col-sm-12 col-lg-6 col-xl-6">
                                    <label for="nknida" class="form-label">National ID</label>
                                    <input style="background: #95D5B2; border: 1px solid #6c7293" value={{kin.national_ID}} type="text" name="nknida" class="form-control" id="nknida"
                                        aria-describedby="emailHelp">
                                    
                                </div>
                                <div class="mb-3 col-12 col-md-6 col-sm-12 col-lg-6 col-xl-6">
                                    <label for="nkphone" class="form-label">Phone number</label>
                                    <input style="background: #95D5B2; border: 1px solid #6c7293" maxlength="10" value="{{kin.phone}}" type="text" name="nkphone" class="form-control" id="nkphone"
                                        aria-describedby="emailHelp">
                                    
                                </div>
                                {% comment %} <div class="mb-3 col-12 col-md-6  col-sm-12 col-lg-6 col-xl-6">
                                    <div>
                                        <label class="form-label">Profile picture</label>                                        
                                        <input accept="image/*" style="display: none" class="form-control bg-dark" name="nkphoto" type="file" id="nkphoto">
                                        <label title={{kin.photo.url}} id="nkphotolabel" for="nkphoto" style="width: 150px; height: 100px; border: 1px dotted rgb(179, 177, 177); background-color: rgb(231, 231,231); cursor: pointer;" class="d-flex justify-content-center align-items-center">
                                            <img id="nkloadedimg" src={{kin.photo.url}} style="width: 100%; height: 100%" />
                                        </label>
                                    </div>
                                </div> {% endcomment %}
                        </div>
                        </div>
                    </div>

                    
                    <div class="col-sm-12 col-xl-6">
                        <div style="background: #fff" class="rounded h-100 p-4">
                            <h6 style="color: #6c7293" class="mb-4 fst-italici text-uppercase">Farm Size By Coordinates</h6>
                                
                            <div class="">
                                <div>
                                    <div class="d-flex align-items-center text-nowrap mt-3">
                                        <label for="leftHeight">Fill coordinates</label>
                                        <input style="background: #95D5B2; border: 1px solid #6c7293" type="text" id="lh" name="lh" placeholder="lat, long" class="form-control mx-4 text-center" id="leftHeight" />
                                        <span onClick="addCoords('lh');" class="text-success"><i class="fa fa-plus"></i></span>
                                    </div>
                                    <small onClick="getLocation('lh');" style="text-decoration: underline; cursor: pointer; margin-left: 50%" class="fst-italici form-text d-end">fetch coords.
                                        <img style="display: none" id="lh_loader" src={% static 'mkulima/images/loader.gif' %} height="28px" width="28px" />
                                    </small>
                                    <div>
                                        <p class="text-uppercase fst-italici mt-5">Added Coordinates</p>
                                        <div id="coorsHolder">
                                            {% for coordinate in coords %}
                                            <span class="my-2  text-nowrap" style="margin-right: 10px">   
                                                {{coordinate}}
                                                <span class="mx-1 text-danger trash" style="cursor: pointer;">del</span>
                                            </span>
                                            {% endfor %}
                                        </div>
                                    </div>
                                </div>
                                
                            </div>   
                        </div>
                    </div>



                    <div class="col-sm-12 col-xl-6">
                        <div style="background: #fff" class="rounded h-100 p-4">
                            <h6 style="color: #6c7293" class="mb-4 fst-italici text-uppercase">FARM EXTRA INFORMATIONS.</h6>
                                
                            <div class="">
                                <div class="mb-3 col-12 col-md-12 col-sm-12 col-lg-12 col-xl-12">
                                    <label for="currentuse" class="form-label">Farm Current Use</label>
                                    <input style="background: #95D5B2; border: 1px solid #6c7293" value={% if use %}"{{use}}" {%else%}''{% endif %} type="text" class="form-control" name="currentuse" id="currentuse"
                                        aria-describedby="emailHelp">
                                </div>
                                <div class="mb-3 col-12 col-md-12 col-sm-12 col-lg-12 col-xl-12">
                                    <label for="currentcrop" class="form-label">Farm Current Crop</label>
                                    <input style="background: #95D5B2; border: 1px solid #6c7293" value={% if crop %}"{{crop}}" {%else%}''{% endif %} type="text" class="form-control" name="currentcrop" id="currentcrop"
                                        aria-describedby="emailHelp">
                                </div>
                                <div class="mb-3 col-12 col-md-12 col-sm-12 col-lg-12 col-xl-12">
                                    <label for="averageyield" class="form-label">Farm Average Yield(per year)</label>
                                    <input style="background: #95D5B2; border: 1px solid #6c7293" value={% if yield %}"{{yield}}" {%else%}''{% endif %} type="text" class="form-control" name="averageyield" id="averageyield"
                                        aria-describedby="emailHelp">
                                </div>
                               
                            </div>   
                        </div>
                    </div>
                    <div class="col-sm-12 col-xl-6 pb-4">
                        <div style="background: #fff" class="rounded h-100 p-4">
                            <h6 style="color: #6c7293" class="mb-4 fst-italici">FARM LOCATION AND SIZE</h6>
                            <div class="row">
                                <div class="mb-3 col-12 col-md-6  col-sm-12 col-lg-6 col-xl-6">
                                    <label for="fmcountry" class="form-label">Country</label>

                                    <select style="background: #95D5B2; border: 1px solid #6c7293" id="fmcountry" name="fmcountry" class="form-select mb-3" aria-label="Default select example">
                                        <option {% if farm.country == "Tanzania"  %} selected {% endif %} value="Tanzania">TANZANIA</option>
                                    </select>
                                </div>
                                <div class="mb-3 col-12 col-md-6  col-sm-12 col-lg-6 col-xl-6">
                                    <label for="fmregion" class="form-label">Region</label>
                                        <input type="hidden" id="hiddenFregion" value="{{farm.region}}" />
                                    <select style="background: #95D5B2; border: 1px solid #6c7293" id="fmregion" name="fmregion" class="form-select mb-3" aria-label="Default select example">
                                        
                                    </select>
                                </div>
                                <div class="mb-3 col-12 col-md-6  col-sm-12 col-lg-6 col-xl-6">
                                    <label for="fmdistrict" class="form-label">District</label>
                                    <input type="hidden" id="hiddenFdistrict" value="{{farm.district}}" />
                                    <select style="background: #95D5B2; border: 1px solid #6c7293" id="fmdistrict" name="fmdistrict" class="form-select mb-3" aria-label="Default select example">
                                    </select>
                                </div>
                                <div class="mb-3 col-12 col-md-6 col-sm-12 col-lg-6 col-xl-6">
                                    <label for="fmward" class="form-label">Ward</label>
                                    <input style="background: #95D5B2; border: 1px solid #6c7293" value="{{farm.ward}}" type="text" name="fmward" class="form-control" id="fmward"
                                        aria-describedby="emailHelp">
                                    
                                </div>
                                {% comment %} <div class="mb-3 col-12 col-md-6  col-sm-12 col-lg-6 col-xl-6">
                                    <label for="fmward" class="form-label">Ward</label>

                                    <select id="fmward" name="fmward" class="form-select mb-3" aria-label="Default select example">
                                        <option {% if farm.ward == "Buguruni" %} selected {% endif %} value="Buguruni">Buguruni</option>
                                        <option {% if farm.ward == "Vingunguti" %} selected {% endif %} value="Vingunguti">Vingunguti</option>
                                        <option {% if farm.ward == "Posta" %} selected {% endif %} value="Posta">Posta</option>
                                        <option {% if farm.ward == "Tabata" %} selected {% endif %} value="Tabata">Tabata</option>
                                        <option {% if farm.ward == "Amana" %} selected {% endif %} value="Amana">Amana</option>
                                    </select>
                                </div> {% endcomment %}
                                <div class="mb-3 col-12 col-md-6 col-sm-12 col-lg-6 col-xl-6">
                                    <label for="fmstreet" class="form-label">Street/Village</label>
                                    <input style="background: #95D5B2; border: 1px solid #6c7293" value="{{farm.street}}" type="text" name="fmstreet" class="form-control" id="fmstreet"
                                        aria-describedby="emailHelp">
                                    
                                </div>
                                {% comment %} <div class="mb-3 col-12 col-md-6 col-sm-12 col-lg-6 col-xl-6">
                                    <label for="fmsize" class="form-label">Farm size(in hectras)</label>
                                    <input style="background: #95D5B2; border: 1px solid #6c7293" value="{{farm.size}}" type="text" name="fmsize" class="form-control" id="fmsize"
                                        aria-describedby="emailHelp">
                                    
                                </div> {% endcomment %}
                        </div>
                        </div>
                    </div> 
                </div>
            </div>
        </form>
            <!-- Form End -->

        </div>
        <!-- Content End -->


        <!-- Back to Top -->
        <a href="#" class="btn btn-lg btn-success btn-lg-square back-to-top"><i class="bi bi-arrow-up"></i></a>
    </div>


    <!-- location scripts -->
    <script>
        domain = 'http://147.182.138.184/api/'

        fetch(`${domain}regions`).then(response => response.json())
            .then(regions => {
                let submittedOregion = document.getElementById('hiddenOregion').value
                let oregion = document.getElementById('oregion')
                for (let region of regions) {
                    option = document.createElement("option")
                    option.innerText = region.name
                    option.className = 'oregopt'
                    if (region.name === submittedOregion) {
                        option.selected = true
                    }
                    oregion.appendChild(option)
                }

                /*
                let submittedKregion = document.getElementById('hiddenKregion').value
                let nkregion = document.getElementById('nkregion')
                for (let region of regions) {
                    option = document.createElement("option")
                    option.innerText = region.name
                    option.className = 'nregopt'
                    if (region.name === submittedKregion) {
                        option.selected = true
                    }
                    nkregion.appendChild(option)
                }
                */


                let sumbittedFmRegion = document.getElementById('hiddenFregion').value
                let fmregion = document.getElementById('fmregion')
                for (let region of regions) {
                    option = document.createElement("option")
                    option.innerText = region.name
                    option.className = 'fmhiddenregion'
                    if (region.name === sumbittedFmRegion) {
                        option.selected = true
                    }
                    fmregion.appendChild(option)
                }

            })

        fetch(`${domain}districts`).then(response => response.json())
            .then(districts => {
                
                // nkregion = document.getElementById('nkregion')
                fmregion = document.getElementById('fmregion')
                oregion = document.getElementById('oregion')
                

                let submittedOregion = document.getElementById('hiddenOregion').value
                let submittedOdistrict = document.getElementById('hiddenOdistrict').value
                let odistrict = document.getElementById('odistrict')
                dst = districts.filter(district => district.region === submittedOregion)
                console.log('dst ', dst)
                for (let district of dst) {
                    option = document.createElement("option")
                    option.innerText = district.name
                    option.className = 'oregopt'
                    if (district.name === submittedOdistrict) {
                        option.selected = true
                    }
                    odistrict.appendChild(option)
                }

                /*
                let submittedKregion = document.getElementById('hiddenKregion').value
                let submittedKdistrict = document.getElementById('hiddenKdistrict').value
                let nkdistrict = document.getElementById('nkdistrict')
                dst = districts.filter(district => district.region === submittedKregion)
                for (let district of dst) {
                    option = document.createElement("option")
                    option.innerText = district.name
                    option.className = 'kregopt'
                    if (district.name === submittedKdistrict) {
                        option.selected = true
                    }
                    nkdistrict.appendChild(option)
                }
                */



                let submittedFregion = document.getElementById('hiddenFregion').value
                let submittedFdistrict = document.getElementById('hiddenFdistrict').value
                let fmdistrict = document.getElementById('fmdistrict')
                dst = districts.filter(district => district.region === submittedFregion)
                for (let district of dst) {
                    option = document.createElement("option")
                    option.innerText = district.name
                    option.className = 'kregopt'
                    if (district.name === submittedFdistrict) {
                        option.selected = true
                    }
                    fmdistrict.appendChild(option)
                }

                /*
                nkregion.addEventListener('change', (e) => {
                    value = e.target.value;
                    console.log('selected region ', value)
                    dists = districts.filter(value => value.region === e.target.value)
    
                    // remove existed children
                    options = Object.values(nkdistrict.children)
                    for (let opt of options) {
                        
                        nkdistrict.removeChild(opt)
                    }
                    // add new one
                    for (let district of dists) {
    
                        option = document.createElement("option")
                        if (dists.indexOf(district) === 0) {
                            option.selected = true
                        }
                        option.innerText = district.name
                        option.className = 'nkdis'
                        // first remove all children existed..
                        console.log('nkdistrict ', nkdistrict)
                        
                        nkdistrict.appendChild(option)
                    }
                })
                */
    
    
    
                oregion.addEventListener('change', (e) => {
                    value = e.target.value;
                    dists = districts.filter(value => value.region === e.target.value)
                    // remove existed children
                    options = Object.values(odistrict.children)
                    for (let opt of options) {
                        
                        console.log('yes sir')
                        odistrict.removeChild(opt)
                    }
                    // add new one
                    for (let district of dists) {
    
                        option = document.createElement("option")
                        if (dists.indexOf(district) === 0) {
                            option.selected = true
                        }
                        option.innerText = district.name
                        option.className = 'odis'
                        
                        // first remove all children existed..
                        
                        odistrict.appendChild(option)
                    }
                })
                // we should detect value found in onChange region...
    
    
    
    
                fmregion.addEventListener('change', (e) => {
                    value = e.target.value;
                    dists = districts.filter(value => value.region === e.target.value)
                    // remove existed children
                    options = Object.values(fmdistrict.children)
                    for (let opt of options) {
                       
                        fmdistrict.removeChild(opt)
                    }
                    // add new one
                    for (let district of dists) {
    
                        option = document.createElement("option")
                        if (dists.indexOf(district) === 0) {
                            option.selected = true
                        }
                        option.innerText = district.name
                        option.className = 'fmdis'
                        // first remove all children existed..
                        
                        fmdistrict.appendChild(option)
                    }
                })
    
                
            })

    </script>

    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
   
    <script src={% static "mkulima/js/darkpan/lib/chart/chart.min.js" %}></script>
    <script src={% static "mkulima/js/darkpan/lib/easing/easing.min.js" %}></script>
    <script src={% static "mkulima/js/darkpan/lib/waypoints/waypoints.min.js" %}></script>
    <script src={% static "mkulima/js/darkpan/lib/owlcarousel/owl.carousel.min.js" %}></script>
    <script src={% static "mkulima/js/darkpan/lib/tempusdominus/js/moment.min.js" %}></script>
    <script src={% static "mkulima/js/darkpan/lib/tempusdominus/js/moment-timezone.min.js" %}></script>
    <script src={% static "mkulima/js/darkpan/lib/tempusdominus/js/tempusdominus-bootstrap-4.min.js" %}></script>
    <!-- Template Javascript -->
    <script src={% static "mkulima/js/darkpan/main.js" %}></script>



    <!-- Script to get current location-->
    <script>
        function getLocation(side) {
            console.log('im get called')
            if(navigator.geolocation) {
                loaderElm = document.getElementById(`${side}_loader`)
                loaderElm.style.display = "inline"
               
                navigator.geolocation.getCurrentPosition(
                    // SUCCESS CALLBACK    
                    ({coords}) => {

                        inputElem = document.getElementById(side)
                        inputElem.value = `${coords.latitude}, ${coords.longitude}`
                        loaderElm.style.display = "none"

                    }, 
                    // ERROR CALLBACK, one of error is timeout if we set, timeout means google should compute location within that time not asking for permission
                    (error) => {
                        message = "Error: " + error.message
                        loaderElm.style.display = "none"
                    },
                    
                )
            } 
            else {
                message = "Your browser does not support geolocation API"
            }
        }
    </script>

<!-- Script to add coordinates the table-->
    <script>
        
        ownerphoto = document.getElementById('ownerphoto')
        ownerphoto.addEventListener('change', ({target}) => {
            defaultImageValue = document.getElementById('ownerphotolabel').title
            const file = target.files[0];
            if (file && file.type.substr(0, 5) === "image") {
                const reader = new FileReader();
                document.getElementById('loadedimg').parentNode.removeChild(document.getElementById('loadedimg'))
                reader.onloadend = () => {
                    img = document.createElement('img')
                    img.id = "loadedimg"
                    img.src = reader.result
                    img.style.width='100%'
                    img.style.height='100%'
                    document.getElementById('ownerphotolabel').appendChild(img)
                };
                reader.readAsDataURL(file)
                // store filename of last file.....
                // ni muhimu ku-override za django with the next one.. 
            } 
            else {
                document.getElementById('loadedimg').parentNode.removeChild(document.getElementById('loadedimg'))
                img = document.createElement('img')
                img.id = "loadedimg"
                img.src = "{% static 'mkulima/images/error.png' %}"
                img.style.width='100%'
                img.style.height='100%'
                document.getElementById('ownerphotolabel').appendChild(img)
            }
        
        })

        /*nkphotoElem = document.getElementById('nkphoto')
        nkphotoElem.addEventListener('change', ({target}) => {
            defaultImageValue = document.getElementById('nkphotolabel').title
            const file = target.files[0];

            if (file && file.type.substr(0, 5) === "image") {
                const reader = new FileReader();
                document.getElementById('nkloadedimg').parentNode.removeChild(document.getElementById('nkloadedimg'))
                reader.onloadend = () => {
                    img = document.createElement('img')
                    img.id = "nkloadedimg"
                    img.src = reader.result
                    img.style.width='100%'
                    img.style.height='100%'
                    document.getElementById('nkphotolabel').appendChild(img)
                };
                reader.readAsDataURL(file)
                
            } 
            else {
                document.getElementById('nkloadedimg').parentNode.removeChild(document.getElementById('nkloadedimg'))
                img = document.createElement('img')
                img.id = "nkloadedimg"
                // rende image which show something is 'unrecognized'
                img.src = "{% static 'mkulima/images/error.png' %}"
                img.style.width='100%'
                img.style.height='100%'
                document.getElementById('nkphotolabel').appendChild(img)
            }
        })*/

        
        coordcontainers = document.getElementsByClassName('trash');
        for (let span of coordcontainers) {
            span.addEventListener("click", (e) => {
                // nimeweka 'del' instead of delete icon coz nikibonyeza target inakuwa ni <i> sometimes inakua <spa> ko inakua vigumu ku-delete coz inaweza ika-delete data zote na hii ni kwa sababu error in propagate hadi ndani instead ya kuishia kwenye 'span' ko 'del' coz ni text haiwezi ikawa na event.
                e.stopPropagation()
                spanParentElem = e.target.parentNode.parentNode
                spanParentElem.removeChild(e.target.parentNode)
            })
        }  // TO CHANGE 
        

        document.getElementById('submitbtn').addEventListener("click", (event) => {
            event.preventDefault(); // this event obj have many attributes and value like 'targetDomElement' and so on.
            // let holder = document.getElementById("coorsHolder")
            window.scrollTo(0, 0)
            wivesElem = document.getElementById('fdwives')
            fdliveElem = document.getElementById('fdlivestock')
            fdchildElem = document.getElementById('fdchildren')
            oagElem = document.getElementById("oage")
            nkageElem = document.getElementById("nkage")
            frontEndMsgElem = document.getElementById("frontEndMsg")
            frotnEndMsgPElem = document.getElementById("frontEndMessage")
            defaultDropdownTxt = "Open this select menu"
            if(wivesElem.value.length < 1) {
                wivesElem.value = 0
            }

            if (fdliveElem.value.length < 1) {
                fdliveElem.value = 0
            }

            if (fdchildElem.value.length < 1) {
                fdchildElem.value = 0
            }
            if (oagElem.value.length < 1) {
                oagElem.value = 0
            }
            if (nkageElem.value.length < 1) {
                nkageElem.value = 0
            }

                // OWNER VALIDATION
            if (document.getElementById("oname").value.trim().length < 1) {
                const message = "Owner name should not be empty"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }


            if (oagElem.value < 10) {
                const message = "Owner age should be greater than 10"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }

            if (document.getElementById("ogender").value === defaultDropdownTxt ) {
                const message = "Select owner gender"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }


            if (document.getElementById("ownernida").value.trim().length < 1) {
                const message = "Owner nation ID should not be empty"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }

            if (document.getElementById("ownerphone").value.trim().length < 1) {
                const message = "Owner phone number should not be empty"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }


            
            if (document.getElementById("ownerphoto").value.trim().length > 1) {
                /*
                    even if user passed "kakaal.png.png.dfidfdoof.txt" you can split this string by '.' it
                    will give you ['kakaal', 'png', 'png', 'dfidfdoof', 'txt'] because in most cases the file
                    extension is located at the end then from the resulting array let's locate the last element 
                    and that's is our file extension to validate..
                */
                value = document.getElementById("ownerphoto").value.trim()
                arrElem = value.split('.')
                ext = arrElem[arrElem.length - 1]
                if (ext != 'png' && ext != 'jpg' && ext != 'jpeg' && ext !='gif') {
                    const message = "unrecognized owner photo format, use .png, .jpg, .jpeg or gif"
                    frotnEndMsgPElem.innerText = message
                    frontEndMsgElem.style.display = "block"
                    setTimeout(() => {
                        frontEndMsgElem.style.display = "none"
                    }, 2000)
                    return;
                }
            }

            // OWNER VALIDATION END


            // OWNER RESIDENCE VALIDATION
            if (document.getElementById("ocountry").value === defaultDropdownTxt ) {
                const message = "Provide owner country"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }

            if (document.getElementById("oregion").value === defaultDropdownTxt ) {
                const message = "Provide owner region"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }

            if (document.getElementById("odistrict").value === defaultDropdownTxt ) {
                const message = "Provide owner district"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }

            if (document.getElementById("oward").value === defaultDropdownTxt || document.getElementById("oward").value.trim().length < 1) {
                const message = "Provide owner ward"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }

            // OWNER RESIDENCE VALIDATION END

            // OWNER FAMILY DETAILS VALIDATION
            if (document.getElementById("marital").value === defaultDropdownTxt ) {
                const message = "Provide data to marital status"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }

            if (document.getElementById("fdhousetype").value === defaultDropdownTxt ) {
                const message = "Provide data to house type"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }

            // OWNER FAMILY DETAILS VALIDATION END

            // NEXT OF KIN VALIDATION
            if (document.getElementById("nkfullname").value.trim().length < 1) {
                const message = "Next of kin name should not be empty"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }

            if (nkageElem.value < 10) {
                const message = "Next of kin age should be greater that 10"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }

            if (document.getElementById("nkgender").value === defaultDropdownTxt ) {
                const message = "Select next of kin gender"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }


            if (document.getElementById("nknida").value.trim().length < 1) {
                const message = "Next of kin nation ID should not be empty"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }

            if (document.getElementById("nkphone").value.trim().length < 1) {
                const message = "Next of kin phone number should not be empty"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }


            /*if (document.getElementById("nkphoto").value.trim().length > 1) {
                value = document.getElementById("nkphoto").value.trim()
                arrElem = value.split('.')
                ext = arrElem[arrElem.length - 1]
                if (ext != 'png' && ext != 'jpg' && ext != 'jpeg' && ext !='gif') {
                    const message = "unrecognized next of kin photo format, use .png, .jpg, .jpeg or gif"
                    frotnEndMsgPElem.innerText = message
                    frontEndMsgElem.style.display = "block"
                    setTimeout(() => {
                        frontEndMsgElem.style.display = "none"
                    }, 2000)
                    return;
                }
            } */

            // NEXT OF KIN VALIDATION END

            
            // FARM EXTRA INFORMATIN VALIDATIONS
            if (document.getElementById("currentuse").value.trim().length < 1) {
                const message = "Fill current use of the farm."
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }   

            if (document.getElementById('fmcountry').value === defaultDropdownTxt) {
                const message = "Select farm country"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            } 
            if (document.getElementById('fmregion').value === defaultDropdownTxt) {
                const message = "Select farm region"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }
            if (document.getElementById('fmdistrict').value === defaultDropdownTxt) {
                const message = "Select farm district"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }
            if (document.getElementById('fmward').value === defaultDropdownTxt || document.getElementById("fmward").value.trim().length < 1) {
                const message = "Select farm ward"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }
            if (document.getElementById('fmstreet').value.trim().length < 1) {
                const message = "Farm street should not be empty"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }
            /*
            if (document.getElementById('fmsize').value.trim().length < 1) {
                const message = "Farm size should not be empty"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }
            */
            // FARM EXTRA INFORMATION VALIDATIONS END 



            // NEW LOGIC OF COORDINATION VALIDATION.....
            if (coorsHolder.childElementCount < 4) {
                const message = "Put more than 4 coordinates"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }
             
            const coordinates = []
            for (let child of coorsHolder.children) {
                let coords = child.outerText
                coords = coords.substring(0, coords.indexOf('d')-1)
                console.log('accurate coords ', coords) 
                coordinates.push(coords)
            }

            const stringifiedCoors = JSON.stringify(coordinates)
            const coordsElem = document.getElementById('lh')
            coordsElem.value = stringifiedCoors;
            // i also should look on edit record
            // then submit your form..
            document.getElementById('metadataForm').submit()

        })

        function whenClicked() {
            console.log('Im clicked!!')
            // read the value of that button..
            elem = document.getElementById('fdmarital')
            elemVal = document.getElementById('fdmarital').value

            elemVal === "false" ? elem.value = "true" : elem.value = "false";

        }

        
    </script>

    <script>
        function addCoords(side) {
            console.log('side ', side)
            elem = document.getElementById(side)
            console.log('elem ', elem)
            elemValue = document.getElementById(side).value
            if(elemValue.trim().length > 0) {
                let node;
                let td;
                let span
                switch(side) {
                    case 'lh':
                        span = document.createElement("span")
                        span.innerText = elemValue
                        span.className = "my-2"
                        span.style.marginRight = '10px'
                        spanIcon = document.createElement("span")
                        spanIcon.className="mx-1 text-danger"
                        spanIcon.innerHTML = '<span class="mx-1 text-danger trash" style="cursor: pointer;">del</span>' //'<i class="fa fa-trash"></i>'
                        spanIcon.style.cursor = 'pointer'
                        console.log('span icon ', spanIcon)
                        spanIcon.addEventListener("click", ({target}) => {
                            spanParentElem = target.parentNode.parentNode.parentNode
                            spanParentElem.removeChild(target.parentNode.parentNode)

                        })
                        span.appendChild(spanIcon)
                        console.log('lets append child')
                        document.getElementById('coorsHolder').appendChild(span) // hapa ndo inaposumbua, sa sijui but nahisi kwenye deleting na hii nai-delete coz hii pattern inatokea endapo itaclear multiple 'coordinate' per single click which is error, inapelekea hadi ku-clear all div element. which have this id
                        console.log('lets append child 2')
                        elem.value = ''
                        break;
                    default:
                        console.log('hello')
                        break
                }
            }
            else {
                console.log('we dont have value')
            }
        }
    </script>

    
</body>

</html>