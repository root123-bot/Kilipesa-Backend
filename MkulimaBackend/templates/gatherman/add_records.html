
{% load static %}
<!-- if you want gif simple one don't use complicated LordIcon gif just use this
    https://loading.io/-->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>KiliPesa</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">

    <!-- jquery should be top -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>

     <!-- semantic ui css -->
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.5.0/semantic.min.css"
        integrity="sha512-KXol4x3sVoO+8ZsWPFI/r5KBVB/ssCGB5tsv2nVOKwLg33wTFP3fmnXa47FdSVIshVTgsYk/1734xSk9aFIa4A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
      <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.5.0/semantic.min.js"
        integrity="sha512-Xo0Jh8MsOn72LGV8kU5LsclG7SUzJsWGhXbWcYs2MAmChkQzwiW/yTQwdJ8w6UA9C6EVG18GHb/TrYpYCjyAQw=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    

    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&family=Roboto:wght@500;700&display=swap" rel="stylesheet"> 
    
    <!-- Icon Font Stylesheet -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->

    <link href={% static "mkulima/js/darkpan/lib/owlcarousel/assets/owl.carousel.min.css" %} rel="stylesheet" />
    <link
      href={% static "mkulima/js/darkpan/lib/tempusdominus/css/tempusdominus-bootstrap-4.min.css" %}
      rel="stylesheet"
    />

    <!-- Customized Bootstrap Stylesheet -->
    <link href={% static "mkulima/css/darkpan/bootstrap.min.css" %}
    rel="stylesheet" />

    <!-- Template Stylesheet -->
    <link href={% static "mkulima/css/darkpan/style.css" %} rel="stylesheet" />
</head>

<body>
    <div class="container-fluid position-relative d-flex p-0">
        <!-- Spinner Start -->
        <div id="spinner" class="show bg-dark position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
            <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
                <span class="sr-only">Loading...</span>
            </div>
        </div>
        <!-- Spinner End -->
        <!-- Sidebar Start -->
        <div class="sidebar pe-4 pb-3">
            <nav style="background: #fff" class="navbar">
                    <a href="/" class="navbar-brand mx-4 mb-3" ><img src={% static 'mkulima/images/logo.jpeg' %} width="100" /></a>

                <div class="d-flex align-items-center ms-4 mb-4">
                    <div class="position-relative">
                        <img class="rounded-circle" src={{photo}} alt="" style="width: 40px; height: 40px;">
                        <div class="bg-success rounded-circle border border-2 border-white position-absolute end-0 bottom-0 p-1"></div>
                    </div>
                    <div class="ms-3">
                        <h6 style="color: #6c7293;" class="mb-0 text-capitalize">{{fname}} {{lname}}</h6>
                        <span>Gatherman</span>
                    </div>
                </div>
                <div class="navbar-nav w-100">
                    <a href={% url 'gather_full_profile' %} class="nav-item nav-link"><i class="fa fa-tachometer-alt me-2"></i>Dashboard</a>
                    <a href={% url 'gather_add_record' %} class="text-nowrap nav-item active nav-link"><i class="fa fa-book me-2"></i>Records</a>
                    <a href={% url 'viewgatherprofile' gid=gatherman %} class="nav-item nav-link"><i class="fa fa-edit me-2"></i>Edit Profile</a>
                    <a href={% url 'gatherman_changepassword' %} class="text-nowrap nav-item nav-link"><i class="fa fa-lock me-2"></i>Change Password</a>
                </div>
            </nav>
        </div>
        <!-- Sidebar End -->


        <!-- Content Start -->
        <div class="content">
            <!-- Navbar Start -->
            <nav style="background: #fff" class="navbar navbar-expand sticky-top px-4 py-0">
                <a href="index.html" class="navbar-brand d-flex d-lg-none me-4">
                    <h2 class="text-primary mb-0"><i class="fa fa-user-edit"></i></h2>
                </a>
                <a href="#" class="sidebar-toggler flex-shrink-0">
                    <i class="fa fa-bars text-success"></i>
                </a>
             
                
                <div class="navbar-nav align-items-center ms-auto">
                    <div class="nav-item dropdown">
                        <div class="dropdown-menu dropdown-menu-end bg-secondary border-0 rounded-0 rounded-bottom m-0">
                            <a href="#" class="dropdown-item">
                                <div class="d-flex align-items-center">
                                    <img class="rounded-circle" src="img/user.jpg" alt="" style="width: 40px; height: 40px;">
                                    <div class="ms-2">
                                        <h6 class="fw-normal mb-0">Jhon send you a message</h6>
                                        <small>15 minutes ago</small>
                                    </div>
                                </div>
                            </a>
                            <hr class="dropdown-divider">
                            <a href="#" class="dropdown-item">
                                <div class="d-flex align-items-center">
                                    <img class="rounded-circle" src="img/user.jpg" alt="" style="width: 40px; height: 40px;">
                                    <div class="ms-2">
                                        <h6 class="fw-normal mb-0">Jhon send you a message</h6>
                                        <small>15 minutes ago</small>
                                    </div>
                                </div>
                            </a>
                            <hr class="dropdown-divider">
                            <a href="#" class="dropdown-item">
                                <div class="d-flex align-items-center">
                                    <img class="rounded-circle" src="img/user.jpg" alt="" style="width: 40px; height: 40px;">
                                    <div class="ms-2">
                                        <h6 class="fw-normal mb-0">Jhon send you a message</h6>
                                        <small>15 minutes ago</small>
                                    </div>
                                </div>
                            </a>
                            <hr class="dropdown-divider">
                            <a href="#" class="dropdown-item text-center">See all message</a>
                        </div>
                    </div>
                    <button type="submit" id="submitbtn" form="metadataForm" class="btn btn-success" style="display: none;">Save Record</button>
                    
                    <div class="nav-item dropdown">
                        <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">
                            <img class="rounded-circle me-lg-2" src={{photo}} alt="" style="width: 40px; height: 40px;">
                            <span style="color: #6c7293; font-weight: bold" class="d-none d-lg-inline-flex text-capitalize" onmouseover="this.style.color='#49A078'" onmouseout="this.style.color='#6c7293'">{{fname}} {{lname}}</span>
                        </a>
                        <div style="background: #fff" class="dropdown-menu dropdown-menu-end border-0 rounded-0 rounded-bottom m-0">
                            
                            <a href={% url 'logout' %} class="dropdown-item">Log Out</a>
                        </div>
                    </div>
                   
                    
                </div>
                
            </nav>
            <!-- Navbar End -->


            <!-- Recent Sales Start -->
            <div class="container-fluid pt-4 px-4">
                <div style="background: #fff" class="text-center rounded py-2">
                    <div class="d-flex align-items-center justify-content-between my-2">
                        <h5 style="color: #6c7293"class="mb-0 mx-3 fst-italici text-uppercase">Create a new record</h5>
                        <div>
                            <span id="prevbtn" style="cursor: pointer; display: none;" class="text-success mx-3"><button class="btn btn-success">prev</button></span>
                            <span id="nextbtn" style="cursor: pointer;" class="text-success mx-3"><button class="btn btn-success">next</button></span>
                        </div>
                    </div>
                    <div id="message" style="font-weight: bold; color: red; margin-top: 10px;">
                        <p id='pMessage'>{{message}}</p>
                    </div>
                    <div id="frontEndMsg" style="font-weight: bold; color: red; margin-top: 10px; display: none;">
                        <p id='frontEndMessage'>Hello world</p>
                    </div>
                    
                </div>
            </div>
            <form onkeydown="return event.key != 'Enter';" id="metadataForm", method="POST" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="container-fluid pt-4 px-4">
                    {% comment %} the first div of the first section.. {% endcomment %}
                    <section id="firstsection" style="display: block">
                    <div class="row g-4">
                        <div class="col-sm-12 col-xl-6">
                            <div style="background: #fff" class="rounded h-100 p-4">
                                <h6 style="color: #6c7293" class="mb-4 fst-italici">FARM OWNER</h6>
                                    <div class="row">
                                        <div class="mb-3 col-12 col-md-6 col-sm-12 col-lg-6 col-xl-6">
                                            <label for="oname" class="form-label">Full name</label>
                                            <input style="background: #95D5B2; border: 1px solid #6c7293" type="text" name="oname" class="form-control" id="oname"
                                                aria-describedby="emailHelp">
                                        </div>
                                        <div class="mb-3 col-12 col-md-6  col-sm-12 col-lg-6 col-xl-6">
                                            <label for="oage" class="form-label">Age</label>
                                            <input style="background: #95D5B2; border: 1px solid #6c7293" type="number" min="0" name="oage" class="form-control" id="oage"
                                                aria-describedby="emailHelp">
                                            
                                        </div>
                                        <div class="mb-3 col-12 col-md-6  col-sm-12 col-lg-6 col-xl-6">
                                            <label for="ogender" class="form-label">Gender</label>

                                            <select style="background: #95D5B2; border: 1px solid #6c7293" id="ogender" name="ogender" class="form-select mb-3" aria-label="Default select example">
                                                <option selected>Open this select menu</option>
                                                <option value="Male">Male</option>
                                                <option value="Female">Female</option>
                                            </select>
                                        </div>
                                        <div class="mb-3 col-12 col-md-6  col-sm-12 col-lg-6 col-xl-6">
                                            <label for="ownernida" class="form-label">National ID</label>
                                            <input style="background: #95D5B2; border: 1px solid #6c7293" type="text" name="onida" class="form-control" id="ownernida"
                                                aria-describedby="emailHelp">
                                            <div id="emailHelp" class="form-text">**optional.
                                            </div>
                                        </div>
                                        <div class="mb-3 col-12 col-md-6 col-sm-12 col-lg-6 col-xl-6">
                                            <label for="ownerphone" class="form-label">Phone number</label>
                                            <input style="background: #95D5B2; border: 1px solid #6c7293" maxlength="10" type="text" name="ophone" class="form-control" id="ownerphone"
                                                aria-describedby="emailHelp">
                                        </div>
                                        <div class="mb-3 col-12 col-md-6  col-sm-12 col-lg-6 col-xl-6">
                                            <div>
                                                <label for="ownerphoto" class="form-label">Profile picture</label>
                                                <input style="background: #95D5B2; border: 1px solid #6c7293" class="form-control" name="ophoto" type="file" id="ownerphoto">
                                            </div>
                                        </div>
                                </div>
                                    
                            </div>
                        </div>
                        <div class="col-sm-12 col-xl-6">
                            <div style="background: #fff" class="rounded h-100 p-4">
                                <h6 style="color: #6c7293" class="mb-4 fst-italici">FARM OWNER'S RESIDENCE</h6>
                                <div class="row">
                                    <div class="mb-3 col-12 col-md-6  col-sm-12 col-lg-6 col-xl-6">
                                        <label for="ocountry" class="form-label">Country</label>

                                        <select style="background: #95D5B2; border: 1px solid #6c7293" id="ocountry" name="ocountry" class="form-select mb-3" aria-label="Default select example">
                                            {% comment %} <option selected>Open this select menu</option> {% endcomment %}
                                            <option selected value="Tanzania">TANZANIA</option>
                                        </select>
                                    </div>
                                    <div class="mb-3 col-12 col-md-6  col-sm-12 col-lg-6 col-xl-6">
                                        <label  for="oregion" class="form-label">Region</label>

                                        <select style="background: #95D5B2; border: 1px solid #6c7293" id="oregion" name="oregion" class="form-select mb-3" aria-label="Default select example">
                                            <option selected>Open this select menu</option>
                                            {% comment %} <option value="Dar es salaam">Dar es salaam</option> {% endcomment %}
                                        </select>
                                    </div>
                                    <div class="mb-3 col-12 col-md-6  col-sm-12 col-lg-6 col-xl-6">
                                        <label for="odistrict" class="form-label">District</label>

                                        <select style="background: #95D5B2; border: 1px solid #6c7293" id="odistrict" name="odistrict" class="form-select mb-3" aria-label="Default select example">
                                            <option selected>Open this select menu</option>
                                        </select>
                                    </div>
                                    <div class="mb-3 col-12 col-md-6 col-sm-12 col-lg-6 col-xl-6">
                                        <label for="oward" class="form-label">Ward</label>
                                        <input style="background: #95D5B2; border: 1px solid #6c7293" type="text" name="oward" class="form-control" id="oward"
                                            aria-describedby="emailHelp">
                                    </div>

                                    {% comment %} <div class="mb-3 col-12 col-md-6  col-sm-12 col-lg-6 col-xl-6">
                                        <label for="oward" class="form-label">Ward</label>

                                        <select id="oward" name="oward" class="form-select mb-3" aria-label="Default select example">
                                            <option selected>Open this select menu</option>
                                            <option value="Buguruni">Buguruni</option>
                                            <option value="Vingunguti">Vingunguti</option>
                                            <option value="Posta">Posta</option>
                                            <option value="Tabata">Tabata</option>
                                            <option value="Amana">Amana</option>
                                        </select>
                                    </div> {% endcomment %}
                            </div>
                            </div>
                        </div>
                        <div class="pb-4 col-sm-12 col-xl-6">
                            <div style="background: #fff" class="rounded h-100 p-4">
                                <h6 style="color: #6c7293" class="mb-4 fst-italici text-uppercase">Farm Owner's Family Details</h6>
                                <div class="row">
                                    <div class="mb-3 col-12 col-md-6  col-sm-12 col-lg-6 col-xl-6">
                                        <label for="marital" class="form-label">Marital status</label>
                                        <select style="background: #95D5B2; border: 1px solid #6c7293" id="marital" name="fdmarital" class="form-select mb-3" aria-label="Default select example">
                                            <option selected>Open this select menu</option>
                                            <option value="Single">Single</option>
                                            <option value="Married">Married</option>
                                            <option value="Widowed">Widowed</option>
                                            <option value="Divorced">Divorced</option>
                                        </select>
                                </div>
                                    <div class="mb-3 col-12 col-md-6 col-sm-12 col-lg-6 col-xl-6">
                                        <label for="fdchildren" class="form-label">Number of Children</label>
                                        <input style="background: #95D5B2; border: 1px solid #6c7293" type="number" value="0" min="0" class="form-control" name="fdchild" id="fdchildren"
                                            aria-describedby="emailHelp">
                                        <div id="emailHelp" class="form-text">**optional.
                                        </div>
                                    </div>
                                    <div class="mb-3 col-12 col-md-6 col-sm-12 col-lg-6 col-xl-6">
                                        <label for="fdwives" class="form-label">Number of Wives/Husbands</label>
                                        <input style="background: #95D5B2; border: 1px solid #6c7293" type="number" value="0" min="0" class="form-control" name="fdwives" id="fdwives"
                                            aria-describedby="emailHelp">
                                        <div id="emailHelp" class="form-text">**optional.
                                        </div>
                                    </div><div class="mb-3 col-12 col-md-6 col-sm-12 col-lg-6 col-xl-6">
                                        <label for="fdlivestock" class="form-label">Number of Livestocks</label>
                                        <input style="background: #95D5B2; border: 1px solid #6c7293" type="number" value="0" min="0" class="form-control" name="fdlive" id="fdlivestock"
                                            aria-describedby="emailHelp">
                                        <div id="emailHelp" class="form-text">**optional.
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3 col-12 col-md-6  col-sm-12 col-lg-6 col-xl-6">
                                        <label for="fdhousetype" class="form-label">House Type</label>

                                        <select style="background: #95D5B2; border: 1px solid #6c7293" id="fdhousetype" class="form-select mb-3" name="fdhouse" aria-label="Default select example">
                                            <option selected>Open this select menu</option>
                                            <option value="Mud house">Mud house</option>
                                            <option value="Block house">Block house</option>
                                            <option value="Good Standard">Good Standard</option>
                                        </select>
                                    </div>
                                    
                                </div>
                            </div>
                        </div>
                        <div class="pb-4 col-sm-12 col-xl-6">
                            <div style="background: #fff" class="rounded h-100 p-4">
                                <h6 style="color: #6c7293" class="mb-4 fst-italici text-uppercase">Farm Owner's Next of Kin</h6>
                                <div class="row">
                                    <div class="mb-3 col-12 col-md-6 col-sm-12 col-lg-6 col-xl-6">
                                        <label for="nkfullname" class="form-label">Full name</label>
                                        <input style="background: #95D5B2; border: 1px solid #6c7293" type="text" class="form-control" name="nkname" id="nkfullname"
                                            aria-describedby="emailHelp">
                                        
                                    </div>
                                    <div class="mb-3 col-12 col-md-6  col-sm-12 col-lg-6 col-xl-6">
                                        <label for="nkage" class="form-label">Age</label>
                                        <input style="background: #95D5B2; border: 1px solid #6c7293" type="number" min="0" name="nkage" class="form-control" id="nkage"
                                            aria-describedby="emailHelp">
                                        
                                    </div>
                                    <div class="mb-3 col-12 col-md-6  col-sm-12 col-lg-6 col-xl-6">
                                        <label for="nkgender" class="form-label">Gender</label>

                                        <select style="background: #95D5B2; border: 1px solid #6c7293" id="nkgender" name="nkgender" class="form-select mb-3" aria-label="Default select example">
                                            <option selected>Open this select menu</option>
                                            <option value="Male">Male</option>
                                            <option value="Female">Female</option>
                                        </select>
                                    </div>
                                    <div class="mb-3 col-12 col-md-6  col-sm-12 col-lg-6 col-xl-6">
                                        <label for="nknida" class="form-label">National ID</label>
                                        <input style="background: #95D5B2; border: 1px solid #6c7293" type="text" name="nknida" class="form-control" id="nknida"
                                            aria-describedby="emailHelp">
                                        <div id="emailHelp" class="form-text">**optional.
                                        </div>
                                        
                                    </div>
                                    <div class="mb-3 col-12 col-md-6 col-sm-12 col-lg-6 col-xl-6">
                                        <label for="nkphone" class="form-label">Phone number</label>
                                        <input style="background: #95D5B2; border: 1px solid #6c7293" maxlength="10" type="text" name="nkphone" class="form-control" id="nkphone"
                                            aria-describedby="emailHelp">
                                        
                                    </div> 
                                    {% comment %} <div class="mb-3 col-12 col-md-6  col-sm-12 col-lg-6 col-xl-6">
                                        <div>
                                            <label for="nkphoto" class="form-label">Profile picture</label>
                                            <input style="background: #95D5B2; border: 1px solid #6c7293" class="form-control" name="nkphoto" type="file" id="nkphoto">
                                        </div>
                                    </div> {% endcomment %}
                            </div>
                            </div>
                        </div>
                    </div>
                    {% comment %} the end div of first section {% endcomment %}
                    </section>
                    {% comment %} the first div of the second section {% endcomment %}
                    <section id="secsection" style="display: none">
                    <div class="row g-4">
                        <div class="col-sm-12 col-xl-6">
                            <div style="background: #fff" class="rounded h-100 p-4">
                                <h6 style="color: #6c7293" class="mb-4 fst-italici text-uppercase">Farm Size By Coordinates</h6>
                                    
                                <div class="">
                                    <div>
                                        <div class="d-flex align-items-center mt-3 text-nowrap">
                                            <label for="leftHeight">Fill Coordinates</label>
                                            <input style="background: #95D5B2; border: 1px solid #6c7293" type="text" id="lh" name="lh" placeholder="lat, long" class="form-control mx-4 text-center" id="leftHeight" />
                                            
                                            <span onClick="addCoords('lh');" class="text-success"><i class="fa fa-plus"></i></span>
                                        </div>
                                        <small onClick="getLocation('lh');" style="text-decoration: underline; cursor: pointer; margin-left: 50%" class="fst-italici form-text d-end">fetch coords.
                                            <img style="display: none" id="lh_loader" src={% static 'mkulima/images/loader.gif' %} height="28px" width="28px" />
                                        </small>
                                        <div>
                                            <p class="text-uppercase fst-italici mt-5">Added Coordinates</p>
                                            <div id="coorsHolder">
                                            </div>
                                        </div>
                                    </div>
                                    
                                </div>   
                            </div>
                        </div>

                    
                        <div class="col-sm-12 col-xl-6">
                            <div style="background: #fff" class="rounded h-100 p-4">
                                <h6 style="color: #6c7293" class="mb-4 fst-italici">FARM LOCATION</h6>
                                <div class="row">
                                    <div class="mb-3 col-12 col-md-6  col-sm-12 col-lg-6 col-xl-6">
                                        <label for="fmcountry" class="form-label">Country</label>

                                        <select style="background: #95D5B2; border: 1px solid #6c7293" id="fmcountry" name="fmcountry" class="form-select mb-3" aria-label="Default select example">
                                            <option selected value="Tanzania">TANZANIA</option>
                                        </select>
                                    </div>
                                    <div class="mb-3 col-12 col-md-6  col-sm-12 col-lg-6 col-xl-6">
                                        <label for="fmregion" class="form-label">Region</label>

                                        <select style="background: #95D5B2; border: 1px solid #6c7293" id="fmregion" name="fmregion" class="form-select mb-3" aria-label="Default select example">
                                            <option selected>Open this select menu</option>
                                            {% comment %} <option value="Dar es salaam">Dar es salaam</option> {% endcomment %}
                                        </select>
                                    </div>
                                    <div class="mb-3 col-12 col-md-6  col-sm-12 col-lg-6 col-xl-6">
                                        <label for="fmdistrict" class="form-label">District</label>

                                        <select style="background: #95D5B2; border: 1px solid #6c7293" id="fmdistrict" name="fmdistrict" class="form-select mb-3" aria-label="Default select example">
                                            <option selected>Open this select menu</option>
                                        </select>
                                    </div>
                                    <div class="mb-3 col-12 col-md-6 col-sm-12 col-lg-6 col-xl-6">
                                        <label for="fmward" class="form-label">Ward</label>
                                        <input style="background: #95D5B2; border: 1px solid #6c7293" type="text" name="fmward" class="form-control" id="fmward"
                                            aria-describedby="emailHelp">
                                        
                                    </div>
                                    
                                    <div class="mb-3 col-12 col-md-6 col-sm-12 col-lg-6 col-xl-6">
                                        <label for="fmstreet" class="form-label">Street/Village</label>
                                        <input style="background: #95D5B2; border: 1px solid #6c7293" type="text" name="fmstreet" class="form-control" id="fmstreet"
                                            aria-describedby="emailHelp">
                                        
                                    </div>
                                    {% comment %} <div class="mb-3 col-12 col-md-6 col-sm-12 col-lg-6 col-xl-6">
                                        <label for="fmsize" class="form-label">Farm size(in hectras)</label>
                                        <input style="background: #95D5B2; border: 1px solid #6c7293" type="text" name="fmsize" class="form-control" id="fmsize"
                                            aria-describedby="emailHelp">
                                    </div> {% endcomment %}
                            </div>
                            </div>
                        </div> 

                        <div class="pb-4 col-sm-12 col-xl-6">
                            <div style="background: #fff" class="rounded h-100 p-4">
                                <h6 style="color: #6c7293" class="mb-4 fst-italici text-uppercase">FARM EXTRA INFORMATIONS.</h6>
                                    
                                <div class="">
                                    <div class="mb-3 col-12 col-md-12 col-sm-12 col-lg-12 col-xl-12">
                                        <label for="currentuse" class="form-label">Farm Current Use</label>
                                        <input style="background: #95D5B2; border: 1px solid #6c7293" type="text" class="form-control" name="currentuse" id="currentuse"
                                            aria-describedby="emailHelp">
                                    </div>
                                    <div class="mb-3 col-12 col-md-12 col-sm-12 col-lg-12 col-xl-12">
                                        <label for="currentcrop" class="form-label">Farm Current Crop</label>
                                        <input style="background: #95D5B2; border: 1px solid #6c7293" type="text" class="form-control" name="currentcrop" id="currentcrop"
                                            aria-describedby="emailHelp">
                                    </div>
                                    <div class="mb-3 col-12 col-md-12 col-sm-12 col-lg-12 col-xl-12">
                                        <label for="averageyield" class="form-label">Farm Average Yield(per season in Kg)</label>
                                        <input style="background: #95D5B2; border: 1px solid #6c7293" type="text" class="form-control" name="averageyield" id="averageyield"
                                            aria-describedby="emailHelp">
                                    </div>
                                
                                </div>   
                            </div>
                        </div>
                    </div>
                    {% comment %} the end of the div of the second sectio {% endcomment %}
                    </section>
                </div>
            </form>
            <!-- Form End -->



        </div>
        <!-- Content End -->


        <!-- Back to Top -->
        <a href="#" class="btn btn-lg btn-success btn-lg-square back-to-top"><i class="bi bi-arrow-up"></i></a>
    </div>

    <!-- Fetch all regions -->
    <script>
        function returntofirstpage() {
            // should back us to first position
            first.style.display = 'block'
            second.style.display = 'none'
            nextbtn.style.display = 'inline'
            prevbtn.style.display = 'none'
            submitbtn.style.display = 'none'
            // end of should back us to first position
        }

        regions = []
        districts = []

        domain = 'http://147.182.138.184/api/'

        fetch(`${domain}regions`).then(response => response.json())
            .then(regions =>{
                regions = regions;
                fmregion = document.getElementById('fmregion')
                oregion = document.getElementById('oregion')

                for (let region of regions) {
                    option = document.createElement("option")
                    option.innerText = region.name
                    option.className = 'oregopt'
                    oregion.appendChild(option)
                }

               


                for (let region of regions) {
                    option = document.createElement("option")
                    option.innerText = region.name
                    option.className = 'fmregopt'
                    fmregion.appendChild(option)
                }



            })
            .catch(err => console.log('error ', err))




        fetch(`${domain}districts`).then(response => response.json())
        .then(districts =>{
            districts = districts;
            fmdistrict = document.getElementById('fmdistrict')
            odistrict = document.getElementById('odistrict')

            fmregion = document.getElementById('fmregion')
            oregion = document.getElementById('oregion')

           

            oregion.addEventListener('change', (e) => {
                value = e.target.value;
                dists = districts.filter(value => value.region === e.target.value)
                // remove existed children
                options = Object.values(odistrict.children)
                for (let opt of options) {
                    if (opt.value == 'Open this select menu') {
                        opt.selected = true
                        continue
                    }
                    odistrict.removeChild(opt)
                }
                // add new one
                for (let district of dists) {

                    option = document.createElement("option")
                    option.innerText = district.name
                    option.className = 'odis'
                    // first remove all children existed..
                    
                    odistrict.appendChild(option)
                }
            })
            // we should detect value found in onChange region...




            fmregion.addEventListener('change', (e) => {
                value = e.target.value;
                dists = districts.filter(value => value.region === e.target.value)
                // remove existed children
                options = Object.values(fmdistrict.children)
                for (let opt of options) {
                    if (opt.value == 'Open this select menu') {
                        opt.selected = true
                        continue
                    }
                    fmdistrict.removeChild(opt)
                }
                // add new one
                for (let district of dists) {

                    option = document.createElement("option")
                    option.innerText = district.name
                    option.className = 'fmdis'
                    // first remove all children existed..
                    
                    fmdistrict.appendChild(option)
                }
            })

        })
        .catch(err => console.log('error ', err))
    
    </script>
    <!-- prevnext js-->
    <script src={% static 'gatherman/js/prevnext.js' %}></script>

    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
   
    <script src={% static "mkulima/js/darkpan/lib/chart/chart.min.js" %}></script>
    <script src={% static "mkulima/js/darkpan/lib/easing/easing.min.js" %}></script>
    <script src={% static "mkulima/js/darkpan/lib/waypoints/waypoints.min.js" %}></script>
    <script src={% static "mkulima/js/darkpan/lib/owlcarousel/owl.carousel.min.js" %}></script>
    <script src={% static "mkulima/js/darkpan/lib/tempusdominus/js/moment.min.js" %}></script>
    <script src={% static "mkulima/js/darkpan/lib/tempusdominus/js/moment-timezone.min.js" %}></script>
    <script src={% static "mkulima/js/darkpan/lib/tempusdominus/js/tempusdominus-bootstrap-4.min.js" %}></script>

    <!-- Script to get current location-->
    <script>
        function getLocation(side) {
            if(navigator.geolocation) {
                loaderElm = document.getElementById(`${side}_loader`)
                loaderElm.style.display = "inline"
                navigator.geolocation.getCurrentPosition(
                    ({coords}) => {
                        inputElem = document.getElementById(side)
                        inputElem.value = `${coords.latitude}, ${coords.longitude}`
                        loaderElm.style.display = "none"

                    }, 
                    (error) => {
                        console.log('error occured ', error.message)
                        message = "Error: " + error.message
                        loaderElm.style.display = "none"
                    }
                
                )
            } 
            else {
                message = "Your browser does not support geolocation API"
            }
        }
    </script>

    <!-- Template Javascript -->
    <script src={% static "mkulima/js/darkpan/main.js" %}></script>

    <!-- Script to set the value of toggle on/off marital status-->
    <script>
        let elem = document.getElementById('message')
        let pMessage = document.getElementById('pMessage')
        if (pMessage.firstChild !== null) {
            console.log('can you clear me')
            setTimeout(() => {
                elem.style.display = 'none'
            }, 3000)
        }
    </script>


    <!-- Script to add coordinates the table.. for first i don't have 'submitbtn' so this returns null when i run it-->
    <script>
        
        document.getElementById('submitbtn').addEventListener("click", (event) => {
            
            event.preventDefault(); // this event obj have many attributes and value like 'targetDomElement' and so on.
            let holder = document.getElementById("coorsHolder")

            // since errors are displayed at the top... we should scroll to the top when submit the form..
            window.scrollTo(0, 0)
            // not required fields but they should send 0 if user does not supply the data to them
            wivesElem = document.getElementById('fdwives')
            fdliveElem = document.getElementById('fdlivestock')
            fdchildElem = document.getElementById('fdchildren')
            oagElem = document.getElementById("oage")
            nkageElem = document.getElementById("nkage")
            frontEndMsgElem = document.getElementById("frontEndMsg")
            frotnEndMsgPElem = document.getElementById("frontEndMessage")
            console.log('nkageElem ', nkageElem)
            defaultDropdownTxt = "Open this select menu"
            // uzuri ni kwamba if you put text in integer field it does not count it instead it return 'empty string'.. but if you
            // entered the number everything is good and works fine so our conditon which we put here is valid because it does not count 
            // string...
            // console.log('Their values ', wivesElem.value, fdchildElem.value, fdliveElem.value, wivesElem.value.length, fdliveElem.value.length, fdchildElem.value.length)
            if(wivesElem.value.length < 1) {
                wivesElem.value = 0
            }

            if (fdliveElem.value.length < 1) {
                fdliveElem.value = 0
            }

            if (fdchildElem.value.length < 1) {
                fdchildElem.value = 0
            }
            if (oagElem.value.length < 1) {
                oagElem.value = 0
            }
            if (nkageElem.value.length < 1) {
                nkageElem.value = 0
            }

            // OWNER VALIDATION
            if (document.getElementById("oname").value.trim().length < 1) {
                const message = "Owner name should not be empty"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"

                returntofirstpage()
                
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }


            if (oagElem.value < 10) {
                const message = "Owner age should be greater than 10"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                returntofirstpage()
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }

            if (document.getElementById("ogender").value === defaultDropdownTxt ) {
                const message = "Select owner gender"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                returntofirstpage()
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }

            
            if (document.getElementById("ownernida").value.trim().length > 1) {
                // check if the passed nida is the number....
                let targetValue = document.getElementById("ownernida").value.trim()
                console.log(!isNaN(+targetValue), ' this is our status')
                if (isNaN(+targetValue)) {
                    const message = "Owner national ID should be a number"
                    frotnEndMsgPElem.innerText = message
                    frontEndMsgElem.style.display = "block"
                    returntofirstpage()
                    setTimeout(() => {
                        frontEndMsgElem.style.display = "none"
                    }, 2000)
                    return;
                }
                /*const message = "Owner nation ID should not be empty"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                returntofirstpage()
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;*/
            }

            if (document.getElementById("ownerphone").value.trim().length < 1) {
                const message = "Owner phone number should not be empty"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                returntofirstpage()
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }

            let phone_number = document.getElementById("ownerphone").value.trim()
            if (isNaN(+phone_number)) {
                const message = "Put valid owner phone number."
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                returntofirstpage()
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }

            if (document.getElementById("ownerphone").value.trim().length !== 10) {
                const message = "Owner phone number should be 10 number long"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                returntofirstpage()
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }


            // The photo field give us a value of 'filepath' of image.. so we can validate this '"C:\\fakepath\\bg.jpg"'

            if (document.getElementById("ownerphoto").value.trim().length < 8) {
                const message = "Owner photo should be provided"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                returntofirstpage()
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }

            // OWNER VALIDATION END

           
            // OWNER RESIDENCE VALIDATION
            if (document.getElementById("ocountry").value === defaultDropdownTxt ) {
                const message = "Provide owner country"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }

            if (document.getElementById("oregion").value === defaultDropdownTxt ) {
                const message = "Provide owner region"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                returntofirstpage()
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }

            if (document.getElementById("odistrict").value === defaultDropdownTxt ) {
                const message = "Provide owner district"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                returntofirstpage()
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }
            
            // document.getElementById("oward").value.trim().length < 1 .. added one after changing ward from select input to text input box
            if (document.getElementById("oward").value === defaultDropdownTxt || document.getElementById("oward").value.trim().length < 1) {
                const message = "Provide owner ward"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                returntofirstpage()
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }

            // OWNER RESIDENCE VALIDATION END

            // OWNER FAMILY DETAILS VALIDATION
            if (document.getElementById("marital").value === defaultDropdownTxt ) {
                const message = "Provide data to marital status"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                returntofirstpage()
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }

            if (document.getElementById("fdhousetype").value === defaultDropdownTxt ) {
                const message = "Provide data to house type"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                returntofirstpage()
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }

            // OWNER FAMILY DETAILS VALIDATION END

            // NEXT OF KIN VALIDATION
            if (document.getElementById("nkfullname").value.trim().length < 1) {
                const message = "Next of kin name should not be empty"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                returntofirstpage()
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }

            console.log('nkage value ', nkageElem.value)
            if (nkageElem.value < 10) {
                console.log('yes sir...')
                const message = "Next of kin age should be greater that 10"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                returntofirstpage()
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }
            console.log('nkgender ', document.getElementById("nkgender").value)
            if (document.getElementById("nkgender").value === defaultDropdownTxt ) {
                const message = "Select next of kin gender"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                returntofirstpage()
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }

            if (document.getElementById("nknida").value.trim().length > 1) {
                let targetValue = document.getElementById("nknida").value.trim()
                if (isNaN(+targetValue)) {
                    const message = "Next of kin national ID should be a number"
                    frotnEndMsgPElem.innerText = message
                    frontEndMsgElem.style.display = "block"
                    returntofirstpage()
                    setTimeout(() => {
                        frontEndMsgElem.style.display = "none"
                    }, 2000)
                    return
                }
                /*const message = "Next of kin nation ID should not be empty"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                returntofirstpage()
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
                */
            }

            if (document.getElementById("nkphone").value.trim().length < 1) {
                const message = "Next of kin phone number should not be empty"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                returntofirstpage()
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }

            let kin_phone_number = document.getElementById("nkphone").value.trim()
            if (isNaN(+kin_phone_number)) {
                const message = "Put valid next of kin phone number."
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                returntofirstpage()
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }
            // sth about age being 0 or negative is avoided >>> that is our error..
            if (kin_phone_number.length !== 10) {
                const message = "Next of Kin phone number should be 10 number long"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                returntofirstpage()
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }

            // The photo field give us a value of 'filepath' of image.. so we can validate this '"C:\\fakepath\\bg.jpg"'
            // if (document.getElementById("nkphoto").value.trim().length < 8) {
            //     const message = "Next of kin photo should be provided"
            //     frotnEndMsgPElem.innerText = message
            //     frontEndMsgElem.style.display = "block"
            //     returntofirstpage()
            //     setTimeout(() => {
            //         frontEndMsgElem.style.display = "none"
            //     }, 2000)
            //     return;
            // }

            // NEXT OF KIN VALIDATION END


            // FARM EXTRA INFORMATIN VALIDATIONS
            if (document.getElementById("currentuse").value.trim().length < 1) {
                const message = "Fill current use of the farm."
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }

            if (document.getElementById('fmcountry').value === defaultDropdownTxt) {
                const message = "Select farm country"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            } 
            if (document.getElementById('fmregion').value === defaultDropdownTxt) {
                const message = "Select farm region"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }
            if (document.getElementById('fmdistrict').value === defaultDropdownTxt) {
                const message = "Select farm district"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }
            if (document.getElementById('fmward').value === defaultDropdownTxt  || document.getElementById("fmward").value.trim().length < 1) {
                const message = "Select farm ward"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }
            if (document.getElementById('fmstreet').value.trim().length < 1) {
                const message = "Farm street should not be empty"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }
            /*
            if (document.getElementById('fmsize').value.trim().length < 1) {
                const message = "Farm size should not be empty"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }
            */
            // FARM EXTRA INFORMATION VALIDATIONS END 





            // NEW LOGIC OF COORDINATION VALIDATION.....
            if (coorsHolder.childElementCount < 4) {
                const message = "Put more than 4 coordinates"
                frotnEndMsgPElem.innerText = message
                frontEndMsgElem.style.display = "block"
                setTimeout(() => {
                    frontEndMsgElem.style.display = "none"
                }, 2000)
                return;
            }
             
            const coordinates = []
            for (let child of coorsHolder.children) {
                const coords = child.outerText
                coordinates.push(coords)
            }

            const stringifiedCoors = JSON.stringify(coordinates)
            const coordsElem = document.getElementById('lh')
            coordsElem.value = stringifiedCoors;

            // then submit your form..
            document.getElementById('metadataForm').submit()

        })

        function whenClicked() {
            console.log('Im clicked!!')
            elem = document.getElementById('fdmarital')
            elemVal = document.getElementById('fdmarital').value

            elemVal === "false" ? elem.value = "true" : elem.value = "false";

        }

        function addCoords(side) {
            elem = document.getElementById(side)
            elemValue = document.getElementById(side).value
            if(elemValue.trim().length > 0) {
                let node;
                let td;
                let span
                switch(side) {
                    case 'lh':
                        span = document.createElement("span")
                        span.innerText = elemValue
                        span.className = "my-2 d-block"
                        span.style.marginRight = '10px'
                        spanIcon = document.createElement("span")
                        spanIcon.className="mx-1 text-danger"
                        spanIcon.innerHTML = '<i class="fa fa-trash"></i>'
                        spanIcon.style.cursor = 'pointer'
                        spanIcon.addEventListener("click", ({target}) => {
                            spanParentElem = target.parentNode.parentNode.parentNode
                            spanParentElem.removeChild(target.parentNode.parentNode)
                        })
                        span.appendChild(spanIcon)
                        document.getElementById('coorsHolder').appendChild(span)
                        elem.value = ''
                        break;
                    default:
                        console.log('hello')
                        break
                }
            }
            else {
                console.log('we dont have value')
            }
        } 
    </script>
</body>

</html>