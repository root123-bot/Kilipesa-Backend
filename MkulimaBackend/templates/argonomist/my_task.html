
{% load static %}
{% load filters %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>KiliPesa</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">

    <!-- jquery should be top -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>

    <!-- semantic ui css -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.5.0/semantic.min.css"
    integrity="sha512-KXol4x3sVoO+8ZsWPFI/r5KBVB/ssCGB5tsv2nVOKwLg33wTFP3fmnXa47FdSVIshVTgsYk/1734xSk9aFIa4A=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.5.0/semantic.min.js"
    integrity="sha512-Xo0Jh8MsOn72LGV8kU5LsclG7SUzJsWGhXbWcYs2MAmChkQzwiW/yTQwdJ8w6UA9C6EVG18GHb/TrYpYCjyAQw=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>


    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&family=Roboto:wght@500;700&display=swap" rel="stylesheet"> 
    
    <!-- Icon Font Stylesheet -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->

    <link href={% static "mkulima/js/darkpan/lib/owlcarousel/assets/owl.carousel.min.css" %} rel="stylesheet" />
    <link
      href={% static "mkulima/js/darkpan/lib/tempusdominus/css/tempusdominus-bootstrap-4.min.css" %}
      rel="stylesheet"
    />

    <!-- Customized Bootstrap Stylesheet -->
    <link href={% static "mkulima/css/darkpan/bootstrap.min.css" %}
    rel="stylesheet" />

    <!-- Template Stylesheet -->
    <link href={% static "mkulima/css/darkpan/style.css" %} rel="stylesheet" />

    <!-- Datatables bootstrap-->
    <link href="https://cdn.datatables.net/1.13.4/css/dataTables.bootstrap5.min.css" 
    rel="stylesheet" />
    <script src="https://cdn.datatables.net/buttons/2.3.5/css/buttons.bootstrap5.min.css"></script>
    <!-- the end of dt... -->

    <!-- Datatables export css, when i add these css of buttons then my buttons styles changed, you can remove it if you don't want -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css" />
    <link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.3.6/css/buttons.dataTables.min.css" />
    <!-- end datatables export css-->


</head>


<body>
    <div class="container-fluid position-relative d-flex p-0">
        <!-- Spinner Start -->
        <div id="spinner" class="show bg-dark position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
            <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
                <span class="sr-only">Loading...</span>
            </div>
        </div>
        <!-- Spinner End -->


        <!-- Sidebar Start -->
        <div class="sidebar pe-4 pb-3">
            <nav style="background: #fff" class="navbar">
                <a href="/" class="navbar-brand mx-4 mb-3" ><img src={% static 'mkulima/images/logo.jpeg' %} width="100" /></a>
                <div class="d-flex align-items-center ms-4 mb-4">
                    <div class="position-relative">
                        <img class="rounded-circle" src={{photo}} alt="" style="width: 40px; height: 40px;">
                        <div class="bg-success rounded-circle border border-2 border-white position-absolute end-0 bottom-0 p-1"></div>
                    </div>
                    <div class="ms-3">
                        <h6 style="color: #6c7293" class="mb-0 text-capitalize">{{fname}} {{lname}}</h6>
                        <span>Argonomist</span>
                    </div>
                </div>
                <div class="navbar-nav w-100">
                    <a href={%url 'argo_full_profile' %} class="nav-item nav-link"><i class="fa fa-tachometer-alt me-2"></i>Dashboard</a>
                    <a href={%url 'argo_addtest' %} class="text-nowrap nav-item nav-link"><i class="fa fa-comments me-2"></i>Test & Recomme.</a>
                    <a href="" class="text-nowrap nav-item nav-link active"><i class="fa fa-th me-2"></i>My Task</a>
                    <a href={% url 'viewargoprofile' aid=argonomist %} class="nav-item nav-link"><i class="fa fa-edit me-2"></i>Edit Profile</a>
                    <a href={% url 'forgotPassword' %} class="text-nowrap nav-item nav-link text-nowrap"><i class="fa fa-lock me-2"></i>Change Password</a>
                </div>
            </nav>
        </div>
        <!-- Sidebar End -->


        <!-- Content Start -->
        <div class="content">
            <!-- Navbar Start -->
            <nav style="background: #fff" class="navbar navbar-expand sticky-top px-4 py-0">
                <a href="index.html" class="navbar-brand d-flex d-lg-none me-4">
                    <h2 class="text-primary mb-0"><i class="fa fa-user-edit"></i></h2>
                </a>
                <a href="#" class="sidebar-toggler flex-shrink-0">
                    <i class="fa fa-bars text-success"></i>
                </a>
                <div class="navbar-nav align-items-center ms-auto">
                    <div class="nav-item dropdown">
                        
                    </div>
                    <div class="nav-item dropdown">
                        
                    </div>
                    <div class="nav-item dropdown">
                        <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">
                            <img class="rounded-circle me-lg-2" src={{photo}} alt="" style="width: 40px; height: 40px;">
                            <span style="font-weight: bold; color: #6c7293" class="d-none d-lg-inline-flex text-capitalize" onmouseover="this.style.color='#49A078'" onmouseout="this.style.color='#6c7293'">{{fname}} {{lname}}</span>
                        </a>
                        <div style="color: #fff" class="dropdown-menu dropdown-menu-end border-0 rounded-0 rounded-bottom m-0">
                            <a href={% url 'logout' %} class="dropdown-item">Logout</a>
                            
                        </div>
                    </div>
                </div>
            </nav>
            <!-- Navbar End -->


            

            <!-- Recent Sales Start -->
            <div class="container-fluid pt-4 px-4">
                <div style="background: #fff" class="text-center rounded p-4">
                    
                    <div class="d-flex align-items-center justify-content-between mb-4">
                        <h6 style="color: #6c7293" class="mb-0 fst-italici text-uppercase">Task assigned to me</h6>
                        <a href={%url 'argo_addtest' %} class="text-success">{% if atask > 0 %}
                            Available task({{atask}})
                            {% else %}
                            Available task(0)
                            {% endif %}
                        </a>
                    </div>
                    <div class="table-responsive">
                        {% if idadincompletetask > 0 %}
                        {% comment %} <p class="text-start fst-italici" style="color: grey;">**All these task are locked to you. Make sure you complete them before its deadline otherwise it will be unlocked and anyone can take it. Most task should be completed within 5 days.</p> {% endcomment %}

                        <table id="tableView" class="table text-start align-middle table-bordered table-hover mb-0">
                            <thead>
                                <tr class="">
                                    {% comment %} <th scope="col">Collected by</th>
                                    <th scope="col">Information Id</th>
                                    <th scope="col">Assigned date</th>
                                    <th scope="col">Deadline data</th>
                                    <th scope="col">Collector contact</th>
                                    <th scope="col">Take Action</th> {% endcomment %}

                                    <th scope="col">Collected by</th>
                                    <th class="text-center" scope="col">Farm Owner</th>
                                    <th class="text-center" scope="col">Farm Location</th>
                                    <th class="text-center" scope="col">Collector phone</th>
                                    <th class="text-center" scope="col">Collected at</th>
                                    <th class="text-center" scope="col">Take Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for task in tasks %}
                                <tr>
                                    <td class="text-uppercase">{{task.gathered_by.first_name}} {{task.gathered_by.first_name}}</td>
                                    <td class="text-center">{{task.owner.full_name}}</td>
                                    <td class="text-center">{{task.gatheredinfo.region}}, {{task.gatheredinfo.region}}</td>
                                    <td class="text-center">{{task.gathered_by.phone}}</td>
                                    <td class="text-center">{{task.added_on | formatdatetime}}</td>
                                    <td class="text-center"><a class="btn btn-sm btn-success" href={% url 'filltest' rid=task.id %}>Proceed</a></td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                        {% else %}
                        <p class="fst-italici">No task assigned to you, just explore available tasks that fits you and pick.</p>
                        {% endif %}
                    </div>
                </div>
            </div>
            <!-- Recent Sales End -->

        </div>
        <!-- Content End -->


        <!-- Back to Top -->
        <a href="#" class="btn btn-lg btn-success btn-lg-square back-to-top"><i class="bi bi-arrow-up"></i></a>
    </div>

    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script src={% static "mkulima/js/darkpan/lib/chart/chart.min.js" %}></script>
    <script src={% static "mkulima/js/darkpan/lib/easing/easing.min.js" %}></script>
    <script src={% static "mkulima/js/darkpan/lib/waypoints/waypoints.min.js" %}></script>
    <script src={% static "mkulima/js/darkpan/lib/owlcarousel/owl.carousel.min.js" %}></script>
    <script src={% static "mkulima/js/darkpan/lib/tempusdominus/js/moment.min.js" %}></script>
    <script src={% static "mkulima/js/darkpan/lib/tempusdominus/js/moment-timezone.min.js" %}></script>
    <script src={% static "mkulima/js/darkpan/lib/tempusdominus/js/tempusdominus-bootstrap-4.min.js" %}></script>



    <!-- Data tables -->

    <script src="https://cdn.datatables.net/buttons/2.3.6/js/buttons.html5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.3.6/js/buttons.print.min.js"></script>
    <!-- end added now datatables -->

    <!-- Datatables bootstrap-->
    <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.4/js/dataTables.bootstrap5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.3.6/js/dataTables.buttons.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.3.6/js/dataTables.buttons.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.3.6/js/buttons.html5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.3.6/js/buttons.print.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.3.6/js/buttons.colVis.min.js"></script>


    <script>
        $(document).ready(function() {
            $('#tableView').DataTable( {
                "aLengthMenu": [[10, 25, 50, 100], [10, 25, 50, 100]],
                dom: 'Bfrtip', 
                buttons: [{
                    extend: 'csv',
                    className: 'btn btn-default',
                    exportOptions: {
                        columns: 'th:not(:last-child)'
                    }
                },
                {
                    extend: 'excel',
                    className: 'btn btn-default',
                    exportOptions: {
                        columns: 'th:not(:last-child)'
                    }
                },
                /*{
                    extend: 'pdf',
                    className: 'btn btn-default',
                    exportOptions: {
                        columns: 'th:not(:last-child)'
                    }
                },*/
                {
                    extend: 'print',
                    className: 'btn btn-default',
                    exportOptions: {
                        columns: 'th:not(:last-child)'
                    }
                }
                ],
            } );
        } );
      
    </script>

    <!-- Template Javascript -->
    <script src={% static "mkulima/js/darkpan/main.js" %}></script>

</body>

</html>